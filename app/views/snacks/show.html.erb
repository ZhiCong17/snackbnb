<div class="container mt-2">
  <div class="row">
    <div class="image_wrapper bg-white py-3 col-6">
      <% if @snack.photo.attached? %>
        <%= cl_image_tag @snack.photo.key, alt: @snack.name, height: 300, width: 300 , class: "rounded mx-auto d-block" %>
      <% else %>
        <%= image_tag @snack.image_url, alt: @snack.name, height: 300, width: 300 , class: "rounded mx-auto d-block" %>
      <% end %>
    </div>
    <div class="text_wrapper card col-6 pt-2" data-controller="quantity-button">
      <h1 class="fs-1"><strong><%= @snack.name %></strong></h1>
      <p class='fs-3'>SGD <%= @snack.price %></p>
      <p>Only <%= @snack.quantity %> remaining in stock</p>
      <div class='card py-2 mb-2 text-center rounded' style="width: 150px;">
        <div>
        <p>Order Quantity</p>
          <button type="button" data-action="quantity-button#decrement" data-quantity-button-target="minusButton" class="qty-count qty-count--minus">-</button>
          <span class="product-qty" data-quantity-button-target="label" data-min="1" data-max="<%= @snack.quantity %>">1</span>
          <button type="button" data-action="quantity-button#increment" data-quantity-button-target="addButton" class="qty-count qty-count--add">+</button>
        </div>

        <%= simple_form_for [@snack, @order_item] do |f| %>
          <%= f.input :snack_quantity, label: false, input_html: {
            min: 1,
            max: @snack.quantity,
            value: 1,
            data: { quantity_button_target:"input" },
            class: 'd-none'
          } %>
          <%= f.submit 'Add To Cart' %>
        <% end %>
        <%#= link_to 'Add to cart', add_to_cart_snack_path(@snack), class: "btn btn-primary" %>
        <%# <button type="button" class="btn btn-light">Add to Cart</button> %>
      </div>
      <%#= link_to 'Add to cart', add_to_cart_snack_path(@snack, @query_params), class: "b_add_to btn btn-primary" %>
      <p class='fs-5 mb-0'><strong>Description:</strong></p>
      <p><%= @snack.description %></p>
    </div>
  </div>

  <%= render 'related_products', snack: @snack %>
</div>
